<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">


        <meta property="og:type" content="website" />
        <!--  Essential META Tags -->
        <meta property="og:title" content="The Type System - webtypes"
        />
        

        
        <meta name="twitter:card" content="summary_large_image">

        <!--  Non-Essential, But Recommended -->
        <meta property="og:site_name" content="webtypes">
        <meta name="twitter:image:alt" content="webtypes">
        <title>The Type System - webtypes</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="../../js/highlight.pack.js" defer></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="">webtypes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="api-guide/applications/">Applications</a>
</li>
                            
<li >
    <a href="api-guide/requests-and-responses/">Requests and Responses</a>
</li>
                            
<li >
    <a href="api-guide/routing/">Routing</a>
</li>
                            
<li >
    <a href="api-guide/templates/">Templates</a>
</li>
                            
<li >
    <a href="api-guide/static-files/">Static Files</a>
</li>
                            
<li class="active">
    <a href="api-guide/type-system/">The Type System</a>
</li>
                            
<li >
    <a href="api-guide/api-schemas/">API Schemas</a>
</li>
                            
<li >
    <a href="api-guide/event-hooks/">Event Hooks</a>
</li>
                            
<li >
    <a href="api-guide/dependency-injection/">Dependency Injection</a>
</li>
                            
<li >
    <a href="api-guide/testing/">Testing</a>
</li>
                            
<li >
    <a href="api-guide/deployment/">Deployment</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topics <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="topics/release-notes/">Release Notes</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="api-guide/static-files/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="api-guide/api-schemas/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                <li>
                    <a class="repo-link"
                     href="https://github.com/abetkin/webtypes/tree/master">
                    <img src="../../img/GitHub-Mark-Light-32px.png" alt="webtypes on GitHub" class="repo-img">
                     
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#type-system">Type System</a></li>
            <li><a href="#the-type-class">The Type class</a></li>
            <li><a href="#validation">Validation</a></li>
            <li><a href="#serialization">Serialization</a></li>
            <li><a href="#including-additional-validation">Including additional validation</a></li>
            <li><a href="#api-reference">API Reference</a></li>
            <li><a href="#formats">Formats</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="type-system">Type System</h1>
<p>webtypes comes with a type system that allows you to express constraints on the
expected inputs and outputs of your interface.</p>
<h2 id="the-type-class">The <code>Type</code> class</h2>
<p>Hereâ€™s a quick example of what the type system in webtypes looks like:</p>
<pre><code class="python">from webtypes import types, validators


class Product(types.Type):
    name = validators.String(max_length=100)
    rating = validators.Integer(minimum=1, maximum=5)
    in_stock = validators.Boolean(default=False)
    size = validators.String(enum=['small', 'medium', 'large'])
</code></pre>

<p>You can use the type system both for validation of incoming request data, and
for serializing outgoing response data.</p>
<p>Invalid data will result in a <code>ValidationError</code> being raised.</p>
<pre><code class="python">&gt;&gt;&gt; data = {'name': 't-shirt', 'size': 'big'}
&gt;&gt;&gt; product = Product(data)
webtypes.exceptions.ValidationError: {'rating': 'This field is required.', 'size': 'Must be a valid choice.'}
</code></pre>

<p>Valid data will instantiate a new <code>Type</code> instance.</p>
<pre><code class="python">&gt;&gt;&gt; data = {'name': 't-shirt', 'rating': 4, 'size': 'large'}
&gt;&gt;&gt; product = Product(data)
&lt;Product(name='t-shirt', rating=4, in_stock=False, size='large')&gt;
</code></pre>

<p>You can access the values on a <code>Type</code> instance as attributes.</p>
<pre><code class="python">&gt;&gt;&gt; product.name
't-shirt'
</code></pre>

<p>Or treat a <code>Type</code> as a dictionary-like object.</p>
<pre><code class="python">&gt;&gt;&gt; product['rating']:
4
&gt;&gt;&gt; dict(product)
{'name': 't-shirt', 'rating': 4, 'in_stock': False, 'size': 'large'}
</code></pre>

<h3 id="nested-types">Nested types</h3>
<p>You can include <code>Type</code> classes as fields on other <code>Type</code> classes, like so:</p>
<pre><code class="python">class Location(types.Type):
    latitude = validators.Number(maximum=90.0, minimum=-90.0)
    longitude = validators.Number(maximum=180.0, minimum=-180.0)


class Event(types.Type):
    location = Location
    name = validators.String(max_length=100)
</code></pre>

<h2 id="validation">Validation</h2>
<p>You can use webtypes <code>Type</code> classes as annotations inside your handler functions.</p>
<p>When you do so, validation will be handled automatically prior to running
the handler function. The type information will also be made available
in the application's API Schema.</p>
<pre><code class="python">def create_product(product: Product):
    # Save a new product record in the database.
    ...

routes = [
    Route('/create_product/', method='POST', handler=create_product)
]
</code></pre>

<h2 id="serialization">Serialization</h2>
<p>You may also want to using the type system for data serialization,
and include the type as a return annotation on handler functions.</p>
<p>Again, doing so will expose the type information to the application's
API Schema, and will help ensure that the information your system
returns matches its documented return types.</p>
<pre><code class="python">import typing


def list_products() -&gt; typing.List[Product]:
    queryset = ...  # Query returning products from a data store.
    return [Product(record) for record in queryset]
</code></pre>

<h2 id="including-additional-validation">Including additional validation</h2>
<p>If you have validation rules that cannot be expressed with the default types,
you can include these by subclass the <code>__init__</code> method on the class.</p>
<p>This method should return the validated data, or raise a <code>ValidationError</code>.</p>
<pre><code class="python">from webtypes import exceptions, types, validators


class Organisation(types.Type):
    is_premium = validators.Boolean()
    expiry_date = validators.Date(allow_null=True)

    def __init__(self, *args, **kwargs):
        value = super().__init__(*args, **kwargs)
        if value.is_premium and value.expiry_date is not None:
            message = 'premium organisations should not have any expiry_date set.'
            raise exceptions.ValidationError(message)
        return value
</code></pre>

<h2 id="api-reference">API Reference</h2>
<p>The following typesystem types are supported:</p>
<h3 id="string">String</h3>
<p>Validates string data.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>max_length</code> - A maximum valid length for the data.</li>
<li><code>min_length</code> - A minimum valid length for the data.</li>
<li><code>pattern</code> - A string value, giving a regular expression that the data must match.</li>
<li><code>enum</code> - A list of valid strings that the input must match against.</li>
<li><code>format</code> - An identifier indicating a complex datatype with a string representation. For example <code>"date"</code>, to represent an ISO 8601 formatted date string.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<h3 id="number">Number</h3>
<p>Validates numeric data.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>maximum</code> - A float representing the maximum valid value for the data.</li>
<li><code>minimum</code> - A float representing the minimum valid value for the data.</li>
<li><code>exclusive_maximum</code> - <code>True</code> for an exclusive maximum limit. Defaults to <code>False</code>.</li>
<li><code>exclusive_minimum</code> - <code>True</code> for an exclusive minimum limit. Defaults to <code>False</code>.</li>
<li><code>multiple_of</code> - A float that the data must be strictly divisible by, in order to be valid.</li>
<li><code>enum</code> - A list of valid numbers that the input must match against.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<h3 id="integer">Integer</h3>
<p>Validates integer data.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>maximum</code> - An int representing the maximum valid value for the data.</li>
<li><code>minimum</code> - An int representing the minimum valid value for the data.</li>
<li><code>exclusive_maximum</code> - <code>True</code> for an exclusive maximum limit. Defaults to <code>False</code>.</li>
<li><code>exclusive_minimum</code> - <code>True</code> for an exclusive minimum limit. Defaults to <code>False</code>.</li>
<li><code>multiple_of</code> - An integer that the data must be strictly divisible by, in order to be valid.</li>
<li><code>enum</code> - A list of valid numbers that the input must match against.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<h3 id="boolean">Boolean</h3>
<p>Validates boolean input.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<h3 id="object">Object</h3>
<p>Validates dictionary input.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>properties</code> - A dictionary mapping string key names to child validators.</li>
<li><code>pattern_properties</code> - A dictionary mapping regex key names to child validators.</li>
<li><code>additional_properties</code> - <code>True</code> if additional properties should be allowed. <code>None</code> if additional properties should be discarded. <code>False</code> if additional properties should raise errors. Or a validator instance, to type check any additional properties against.</li>
<li><code>min_properties</code> - An integer indicating the minimum number of properties that may be present. Defaults to <code>None</code>.</li>
<li><code>max_properties</code> - An integer indicating the maximum number of properties that may be present. Defaults to <code>None</code>.</li>
<li><code>required</code> - A list of strings, indicating which properties are required.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<p>You'll typically want to use the simpler declarative <code>Type</code> style for
describing dictionary inputs, but the <code>Object</code> validator may be useful if you
need more general purpose validation.</p>
<h3 id="array">Array</h3>
<p>Validates list input.</p>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>items</code> - A validator or a list of validators.</li>
<li><code>additional_items</code> - Whether additional items past the end of the listed typesystem types are permitted.</li>
<li><code>min_items</code> - The minimum number of items the array must contain.</li>
<li><code>max_items</code> - The maximum number of items the array must contain.</li>
<li><code>unique_items</code> - Whether repeated items are permitted in the array.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>. If set to <code>True</code> and no default value is specified then default=<code>None</code> will be used.</li>
</ul>
<h2 id="formats">Formats</h2>
<p>The following validators return a native python representation, but can be serialized to strings.</p>
<p>Let's declare a new type to see how they work...</p>
<pre><code class="python">from webtypes import types, validators


class Event(types.Type):
    when = validators.DateTime()
    description = validators.String(max_length=100)
</code></pre>

<p>When accessed as attributes on a type, these validators return the native python value.</p>
<pre><code class="python">&gt;&gt;&gt; data = {'when': '2021-06-15T12:31:38.269545', 'description': 'New customer signup'}
&gt;&gt;&gt; event = Event(data)
&gt;&gt;&gt; event.when
datetime.datetime(2021, 6, 15, 12, 31, 38, 269545)
</code></pre>

<p>You can also access the serialized string representation if needed.</p>
<pre><code class="python">&gt;&gt;&gt; event['when']
'2021-04-11T12:31:38.269545'
&gt;&gt;&gt; dict(event)
{'when': '2021-04-11T12:31:38.269545', 'description': 'New customer signup'}
</code></pre>

<h3 id="date">Date</h3>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>.</li>
</ul>
<h3 id="time">Time</h3>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>.</li>
</ul>
<h3 id="datetime">DateTime</h3>
<ul>
<li><code>default</code> - A default to be used if a field using this typesystem is missing from a parent <code>Type</code>.</li>
<li><code>title</code> - A title to use in API schemas and documentation.</li>
<li><code>description</code> - A description to use in API schemas and documentation.</li>
<li><code>allow_null</code> - Indicates if <code>None</code> should be considered a valid value. Defaults to <code>False</code>.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>

            <p align="center">
              <i>webtypes is
                <a href="https://github.com/tomchristie/webtypes/blob/master/LICENSE.md">BSD licensed</a> code.
              </i>
              <p align="center">
                <img src="../../img/logomarque.png" alt="webtypes" class="footer-logo">
              </p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
